apiVersion: v1
kind: ConfigMap
metadata:
  name: fuse-config
  namespace: {{ include "fuse-cache.namespace" . }}
data:
  COORDINATOR_ADDR: {{ (.Values.config.coordinatorAddr | default (printf "coordinator.%s.svc.cluster.local:%v" (include "fuse-cache.namespace" .) .Values.coordinator.httpPort)) | quote }}
  COORDINATOR_GRPC_ADDR: {{ (.Values.config.coordinatorGrpcAddr | default (printf "coordinator.%s.svc.cluster.local:%v" (include "fuse-cache.namespace" .) .Values.coordinator.grpcPort)) | quote }}
  NVME_CACHE_PATH: {{ .Values.config.nvmeCachePath | quote }}
  FUSE_MOUNT_PATH: {{ .Values.config.fuseMountPath | quote }}
  CHUNK_SIZE_MB: {{ .Values.config.chunkSizeMB | quote }}
  FUSE_PARALLEL_RANGE_READS: {{ .Values.config.parallelRangeReads | quote }}
  FUSE_RANGE_PREFETCH_CHUNKS: {{ .Values.config.rangePrefetchChunks | quote }}
  FUSE_RANGE_CHUNK_CACHE_SIZE: {{ .Values.config.rangeChunkCacheSize | quote }}
  FUSE_AZURE_DOWNLOAD_CONCURRENCY: {{ .Values.config.azureDownloadConcurrency | quote }}
  FUSE_AZURE_DOWNLOAD_BLOCK_SIZE_MB: {{ .Values.config.azureDownloadBlockSizeMB | quote }}
  FUSE_AZURE_PARALLEL_DOWNLOAD_MIN_SIZE_MB: {{ .Values.config.azureParallelDownloadMinSizeMB | quote }}
  FUSE_HYBRID_HEDGE_DELAY_MS: {{ .Values.config.hybridHedgeDelayMs | quote }}
  FUSE_HYBRID_MAX_SECONDARY_INFLIGHT: {{ .Values.config.hybridMaxSecondaryInflight | quote }}
  FUSE_IO_PROGRESS_MB: {{ .Values.config.fuseIOProgressMB | quote }}
  FUSE_BACKEND: {{ .Values.config.fuseBackend | quote }}
  FUSE_GOFUSE_ENABLE_PASSTHROUGH: {{ .Values.config.goFuseEnablePassthrough | quote }}
